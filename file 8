# Sentiment Analysis and Text Classification 

#!pip install textblob

from textblob import TextBlob

text1='Anuj looks bit sad today'

blob1=TextBlob(text1)

type(blob1)

# We want to have the sentiment

blob1.sentiment

# Another example

text2='The movie was the worst movie I have watched recently. I felt like cheated'

blob2=TextBlob(text2)

blob2.sentiment

text3='The movie was the worst and horrible movie I have watched recently. I felt like cheated. I recommend not to wacth'

blob3=TextBlob(text3)

blob3.sentiment

text4=' I was elated to receive the wonderful news that I have got a call from the bext company I wanted to join. I am so happy and want to share with all you my happiness by throwing a party'

blob4=TextBlob(text4)

blob4.sentiment

text5=' The sun is going to set at 6 PM'

blob5=TextBlob(text5)

blob5.sentiment



text6='''The Union Budget 2023, presented by the Finance Minister Nirmala Sitharaman proposed to extend the period of limitation on the assessment orders in her budget speech. It was proposed that an order of assessment may be passed within a period of 12 months from the end of the relevant assessment year or the financial year in which updated return is filed, as the case may be. It was also proposed that in cases where search under section 132 of the Income Tax Act, 1961 or requisition under section 132A of the Income Tax Act has been made, the period of limitation of pending assessments shall be extended by twelve months. In the Finance Bill of 2023, it was proposed to amend the section of 153 of the Income Tax Act.  In  sub-section (1A), for the words “nine months”, the words “twelve months” shall be substituted. It was proposed to extend the time limit to 12 months. Additionally, the time limit for completing an assessment or reassessment, as applicable, is extended by 12 months if it is ongoing on the date that a search under Section 132 is commenced or a requisition under Section 132A is made. In this proposal, mainly the time limit has been extended and which would be helpful for the officers to figure out the things and proceed with proper procedure. Additionally, it was proposed to substitute “Principal Chief Commissioner or Chief Commissioner or Principal Commissioner or Commissioner, as the case may be,” for the phrases “Principal Commissioner or Commissioner” at both of their places. As reported before in the case Smt. Rashidaben Taher Morawala Badri Mohalla vsThe DCIT, CITATION: 2022 TAXSCAN (ITAT) 1772, the Division Bench of the Income Tax Appellate Tribunal (ITAT), Ahmedabad quashed the assessment order passed in violation of time limit under Section 153(1) of the Income Tax Act, 1961.

Read More: https://www.taxscan.in/union-budget-2023-period-of-limitation-on-pending-assessment-extended-by-12-months/250888/'''

blob6=TextBlob(text6)

blob6.sentiment

# Text Classification

from sklearn.datasets import fetch_20newsgroups

train=fetch_20newsgroups(subset='train')

test=fetch_20newsgroups(subset='test')

type(train)

train.keys()



train['target_names']

train['target']

import numpy as np

np.unique(train['target'])

train['data']

print(train['data'][1])

print(train['target_names'][1])

print(train['data'][10])

print()

print(train['target_names'][10])

print(train['data'][100])

print()



## Building the model

from sklearn.feature_extraction.text import TfidfVectorizer

from sklearn.naive_bayes import MultinomialNB

from sklearn.pipeline import make_pipeline

mnb=make_pipeline(TfidfVectorizer(),MultinomialNB())

type(mnb)

# Training

mnb.fit(train['data'],train['target'])

# Prediction

y_pred=mnb.predict(test['data'])

y_pred

## Performance of the model

from sklearn.metrics import classification_report,confusion_matrix

report=classification_report(test['target'],y_pred)

print('The report:\n',report)

# Confusion Matrix

cm=confusion_matrix(test['target'],y_pred)

print('The confusion Matrix:\n',cm)

## Testing with our own data

def news_group_prediction(doc):
    group_pred=mnb.predict([doc])
    return test['target_names'][group_pred[0]]

news_group_prediction('Computer technology is becoming more user friendly. Windows operating systems are easy to operate')

news_group_prediction('The soocer is the one sport most of Eurpeaons follow. It is quite a big business, which involved lot of anlaytucs as well  ')


